---
title: AWS Resource Tagging Policy
author: Jill Rouleau
---

# **AWS Resource Tagging Policy**

**Purpose**

To better manage AWS account spending and resource limits as we grow, we are implementing a new tagging policy for resources in AWS account **7210-6686-3947**, which is used by the content teams. This policy will be strictly followed, and all persistent resources should be updated to comply with the new requirement. This policy will not apply to any other AWS accounts used within Ansible. We will automate enforcement, and untagged resources will be deleted via automation.

---

## **Required Tags for AWS Resources**

All AWS resources in account **7210-6686-3947** must have the following tags:

- **Owner**: `<email of the owner>`
- **Persistent**: `True/False`

Additionally, resources should have a meaningful name. While naming conventions vary between AWS services and APIs, there are generally two categories of resource names:

1. **User-defined name identifier** for the resource.
2. **Application of the tag `Name`** by the user.

---

## **Compliance and Termination of Non-Compliant Resources**

Any resources deployed in the Content Team AWS account that are not tagged or are tagged as `Persistent: False` will be subject to termination. The account will be audited, and non-compliant resources will be terminated by [automation](https://github.com/ansible/aws-ci-admin).

---

## **What This Means for You**

If you are creating a resource (such as an EC2 instance, EC2 security group, CloudFormation template, etc.), you should:

1. **Add a tag named `Owner`** with your email id. This helps account admins identify the owner of the resource and contact you if there are any questions or actions needed.
2. **Add a tag named `Persistent`** to indicate whether the resource is critical. If the resource is temporary (such as a test resource), it should be tagged as `Persistent: False`. If the resource is business-critical and should not be deleted, it should be tagged as `Persistent: True`.

---

## **Tagging Examples**

#### **Examples of Resource Naming and Tagging**

- **DynamoDB Table**
  - Table Identifier: `ansible-test-1234`
- **EC2 Instance**
  - Instance ID (auto-generated by the API): `i-0123456abcdef1234`
  - `tag:Name`: `ansible-test-12345`

Note: Some AWS modules may abstract this difference by having a `name` parameter that automatically creates a `tag:Name`. Do your best to follow this convention.

#### **Test / Dev Resource**

For resources that are temporary or for testing purposes, such as an EC2 instance created to test an AWS module, you should tag the resource as `Persistent: False`.

```yaml
- name: Start an instance with a public IP address
  amazon.aws.ec2_instance:
    name: "aca-123-test-instance"
    key_name: "user-key"
    vpc_subnet_id: test-aca-123-subnet
    instance_type: t3.micro
    security_group: test-aca-123-sg
    image_id: ami-123456
    tags:
      Owner: user@redhat.com
      Persistent: False
```

#### **Critical / Production Resource**

For critical resources, such as an EC2 instance running an important bot for triaging GitHub issues, the resource should be tagged as `Persistent: True` to ensure it is not deleted.

```yaml
- name: Start an instance with a public IP address
  amazon.aws.ec2_instance:
    name: "cloud-triage-bot"
    key_name: "user-key"
    vpc_subnet_id: cloud-bot-subnet
    instance_type: t3.micro
    security_group: cloud-gh-bot
    image_id: ami-123456
    tags:
      Owner: user@redhat.com
      Persistent: True
```

#### **Resource With No Name Identifier**

If the resource does not have a user-defined name or identifier, you must provide a `Name` tag.

```yaml
- ec2_vpc_dhcp_option:
    region: us-east-1
    dns_servers:
      - 4.4.4.4
      - 8.8.8.8
    tags:
      Name: ACA-123 Test Option Set
      Owner: user@redhat.com
      Persistent: False
```

---

This policy ensures better management and accountability of resources, helping to reduce unnecessary costs and improve the efficiency of our AWS infrastructure. Please ensure all resources are tagged accordingly to comply with this policy. For any guidance or clarification, feel free to reach out in the **#ansible-content-eng** Slack channel.